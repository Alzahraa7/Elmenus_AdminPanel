<div class="container">
  <div class="row mt-3">
    <div class="col-2">
      <div class="imgDiv">
        <img class="rounded-3" [src]="Restaurant?.ImageLogo" alt="">
      </div>
    </div>
    <div class="col-10">
      <div class="d-flex flex-column textDiv2" >
        <p><span class="textDiv">Name: </span> <span>{{Restaurant?.ResName}}</span>  <button class="btn mse-2" (click)="updateBasicRes(1)"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
        <input #ResNameInput [hidden]="!NameFlag" type="text" class="form-control m-0 p-0" value="{{Restaurant?.ResName}}"
        style="width: 30%; position: relative; bottom: 10px"> 

        <p><span class="textDiv">Owner: </span>  <span>{{Restaurant?.OwnerName}}</span>  <button class="btn mse-2" (click)="updateBasicRes(2)"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
        <input #ownerNameInput [hidden]="!ownerFlg" type="text" class="form-control m-0 p-0" value="{{Restaurant?.OwnerName}}"
        style="width: 30%; position: relative; bottom: 10px"> 

        <p><span class="textDiv">Phone: </span>  <span>{{Restaurant?.Phone}}</span>  <button class="btn mse-2" (click)="updateBasicRes(3)"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
        <input #PhoneInput [hidden]="!phoneFlag" type="text" class="form-control m-0 p-0" value="{{Restaurant?.Phone}}"
        style="width: 30%;position: relative; bottom: 10px"> 

        <p><span class="textDiv">Mood: </span> <span> {{Restaurant?.Mood}} </span>  <button class="btn mse-2" (click)="updateBasicRes(4)"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
        <div *ngFor="let mood of changedMood; let i = index" class="d-flex" style="width: 30%; position: relative; bottom: 10px" >
          <input  [hidden]="!moodFlag" #MoodInput type="text" class="form-control my-1 p-0" value="{{mood}}"
        id="{{i}}" (change)="saveUpdateMood(MoodInput.value, i)"> 
        <button  [hidden]="!moodFlag" class="btn my-1" style="background-color: #e32207; color: white;" (click)="deleteMood(MoodInput.value)">-</button>
        
      </div>
      <small class="text-danger" [hidden]="!errorShow" style="position: relative; bottom: 10px;" >you must filled this field first!!</small>

      <button class="btn btn-success" [hidden]="!moodFlag" style="width: 100px;" (click)="addNewMood()">Add Mood</button>

        <p><span class="textDiv">Type: </span>  <span>{{Restaurant?.Type}} </span> <button class="btn mse-2" (click)="updateBasicRes(5)"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
        <div *ngFor="let type of changedType; let i = index" class="d-flex" style="width: 30%; border-color: #e32207; position: relative; bottom: 10px">
          <input #TypeInput [hidden]="!typeFlag" type="text" class="form-control my-1 p-0" value="{{type}}"
           (change)="saveUpdateType(TypeInput.value, i)"> 
          
          <button  [hidden]="!typeFlag" class="btn my-1" style="background-color: #e32207; color: white;" (click)="deleteType(TypeInput.value)">-</button>
        
        </div>
        <small class="text-danger" [hidden]="!errorTypeShow" style="position: relative; bottom: 10px;" >you must filled this field first!!</small>

      <button class="btn btn-success" [hidden]="!typeFlag" style="width: 100px;" (click)="addNewType()">Add Type</button>


        <button class="btn btnClass my-2" [hidden]="!NameFlag && !ownerFlg && !phoneFlag && !moodFlag && !typeFlag" (click)="updateRes()">Update</button>
     
      </div>
    </div>
  </div>

  <mat-divider class="mt-3 mb-3"></mat-divider>
  <mat-tab-group class="tabDiv" mat-align-tabs="center" color="warn" backgroundColor="warn" animationDuration="1000ms">
    <mat-tab label="Branches">
      <div class="d-flex justify-content-end">
        <button class="btn rounded-circle addBut" (click)="appearForm(true)"> <fa-icon [icon]="plusIcon"></fa-icon> </button>
      </div>
      <div>
        <app-add-branch [clickAdd]="formBranch" (submitted)="disappearForm($event)"></app-add-branch>
      </div>
      <div class="conatiner m-3" *ngFor="let branch of Branches ">
        <mat-accordion multi='false'>
          <mat-expansion-panel (opened)="panelOpenState = true"
                               (closed)="panelOpenState = false">
            <mat-expansion-panel-header class="accordionDiv">
              <mat-panel-title >
                {{branch.LocName}}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <p> <b>Location: </b>{{branch.LocName}} <button class="btn mse-2" (click)="updateFiledBranch(branch,'LocName')"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
            <div *ngIf="editState">
              
            </div>
            <p> <b>Address: </b>{{branch.Address}} <button class="btn mse-2" (click)="updateFiledBranch(branch,'Address')"><fa-icon [icon]="editIcon"></fa-icon></button> </p>

            <p> <b>Working Hours: </b>{{branch.Workinghours}}  <button class="btn mse-2" (click)="updateFiledBranch(branch,'Workinghours')"><fa-icon [icon]="editIcon"></fa-icon></button> </p>

          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </mat-tab>
    <mat-tab label="Offers">
      <div class="conatiner m-3" *ngFor="let offer of Offers ">
        <mat-accordion>
          <div class="d-flex justify-content-end">
            <button class="btn rounded-circle addBut"> <fa-icon [icon]="plusIcon"></fa-icon> </button>
          </div>
          <mat-expansion-panel (opened)="panelOpenState = true"
                               (closed)="panelOpenState = false">
            <mat-expansion-panel-header class="accordionDiv">
              <mat-panel-title >
                {{offer.PromoCode}}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <p> <b>Promo Code: </b>{{offer.PromoCode}}  <button class="btn mse-2"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
            <p> <b>Offer Description: </b>{{offer.Description}}  <button class="btn mse-2"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
            <p> <b>Expiration: </b>{{offer.Expires?.toDate()| date : 'yyyy-MM-dd HH:mm:ss'}}  <button class="btn mse-2"><fa-icon [icon]="editIcon"></fa-icon></button> </p>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </mat-tab>
    <mat-tab label="Menu">
      <mat-form-field appearance="fill" class="d-flex justify-content-end m-2">
        <mat-label>Select Category</mat-label>
        <mat-select (selectionChange)="sendSelected(selected)"  [(value)]="selected"  disableRipple>
          <div *ngFor="let Menu of Menus;let i = index">
            <mat-option *ngFor="let m of Menu.Name" [value]="m">{{m}}</mat-option>
          </div>
          
        </mat-select>
      </mat-form-field>
          <div class="conatiner m-3" *ngFor="let Menu of MenuCatSelected ">
            <mat-accordion multi='false'>
              <mat-expansion-panel (opened)="panelOpenState = true"
                                   (closed)="panelOpenState = false">
                <mat-expansion-panel-header class="accordionDiv">
                  <button class="btn mse-2" (click)="deleteMeal(Menu.CatID)"><fa-icon [icon]="faTrash" class="text-danger"></fa-icon></button>
                  <mat-panel-title >
                    {{Menu.ProName}}
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="d-flex flex-row">
                  <div class="m-3">
                  <img [src]="Menu.ProImg" width="150px" height="150px" class="rounded-3" />
                  </div >
                  <div class="m-3">
                    <p> <b>Description: </b>{{Menu.Description}}</p>
                    <div> <p style="color: var(--first-color);"> Extras:  </p>
                      <p *ngFor="let extras of Menu.Extras">
                        <b>Name of Extar: </b>{{extras.Name}} <br/>
                        <b>Price of Extar: </b>{{extras.Price}}
                      </p>
                    </div>
                    <div> <p style="color: var(--first-color);"> Size:  </p>
                      <p *ngFor="let sizes of Menu.Size">
                        <b>Name of Extar: </b>{{sizes.Name}} <br/>
                        <b>Price of Extar: </b>{{sizes.Price}}
                      </p>
                    </div>
                  </div>
                </div>
              </mat-expansion-panel>
            </mat-accordion>
            
          </div>
          <div class="d-flex justify-content-end">
            <button class="btn rounded-circle addBut" (click)="addMeal(Menus[0].MenuID)"> <fa-icon [icon]="plusIcon"></fa-icon> </button>
          </div>

    </mat-tab>
  </mat-tab-group>
</div>
